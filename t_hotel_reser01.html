<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- 
        호텔 페이지는 단점이 그리 많지 않아서 구조는 대부분 그대로 갔습니다.
        객실 비교와 레고랜드 특유의 테마를 중점적으로 볼 수 있도록 약간 수정하고, 
        대신 페이지를 이동하지 않더라도 프로모션이나 이벤트 등을 같이 확인할 수 있게 포함시켜서
        좀 더 정보 확인이 쉽도록 고려했습니다.
     -->
     <!-- 
        호텔 가격 책정 기준을 모르겠음. 성수기/비성수기, 기간 상관 없이 
        균일가격으로 설정하여 설정하여 제작함. 후에 기준에 맞춰 제작 필요.
      -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>호텔 예약 페이지 │ </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    
    <style>
        :root {
            /* length */
            --main-width: 1350px;
            --roomInfo-slide-unit: 15vw;
            --inputBox-span-min-width: 200px;
            --inputBox-span-border-color: rgba(4, 116, 0, 0.2);
            --sr-title-top: -15px;
            --sr-title-left: 3%;
            --sr-title-font-size:16px;
            --wrap-up-height: 12vh;
            --wrap-up-min-height: 120px;
            /* color */
            --inputBox-bg: rgb(255,255,255);
            --main-bg-color: rgba(0, 128, 0, 0.671);
            --main-yellow-color: #ffcf00;
            --button-yellow: rgb(240, 240, 89);
        }
        body {padding: 0px;margin: 0px; font-family: 'Noto Sans KR', sans-serif; font-size: 16px;}
        a {text-decoration: none;}
        ul,li {list-style: none; padding: 0px; margin: 0px;}
        h1,h2,h3,h4,h5,h6 {margin: 0px; padding: 0px;}
        /* number input 버튼 숨기기 */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type='number'] {
            appearance: textfield;
        }
        /* ================================================================== */
        .mainWrap {
            background-color: var(--main-bg-color);
        }
        
        /* inputbox ----------------- */
        
        .inputBox .checkin,
        .inputBox .checkout {
            width: 100%;
        }
        .inputBox input {
            display: none;
        }
        .inputBox span {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            min-width: 150px;
            height: 60px;
            border-style: solid;
            border-width: 2px;
            box-sizing: border-box;
            font-size: 100%;
            transition: .5s ease;
            cursor: pointer;
        }
        .inputBox span:hover {
            border-color: var(--inputBox-span-border-color);
            color: #999;
        }
        .on {
            border-color: transparent;
            background-color: var(--inputBox-span-border-color);
        }
        .inputBox label {
            display: block;
            width: 100%;
            box-sizing: border-box;
        }
        .inputBox > img {
            display: block;
            width: 30px;
        }
        /* number check ---------------------- */
        .numberCheck {
            position: relative;
            display: flex;
            justify-content: center;
            width: fit-content;
            padding: 5px 40px;
            border-radius: 25px;
            background-color: yellowgreen;

            margin: auto;
        }
        .nc_wrap label {
            display: none;
        }
        .numberCheck input {
            width: 40px;
            height: 30px;
            text-align: center;

            padding: 0px;
            margin: 0px;
            box-sizing: border-box;
            font-size: 20px;
            border: none;
            background-color: transparent;
        }
        .decrease_btn {
            font-size: 0px;
            display: block;
            background-color: var(--main-yellow-color);
            width: 30px;
            height: 30px;
            border-radius: 50%;

            position: absolute;
            top: 5px;
            left: 5px;
        }
        .decrease_btn img {
            width: 30px;
            opacity: 0.7;
        }
        .increase_btn {
            font-size: 0px;
            display: block;
            background-color: var(--main-yellow-color);
            width: 30px;
            height: 30px;
            border-radius: 50%;

            position: absolute;
            top: 5px;
            right: 5px;
        }
        .increase_btn img {
            width: 30px;
            opacity: 0.7;
        }

        /* ================================================================ */       
        .sr_c_list a {
            display: flex;
            justify-content: center;
            align-items: center;
            border-width: 2px;
            border-style: solid;
            border-color: var(--main-yellow-color);
            border-radius: 30px;
            padding: 8px 18px;
            box-sizing: border-box;
            transition: .5s ease;
        }        
        .sr_c_active {
            background-color: var(--main-yellow-color);
            border-color: transparent;
        }
        .sr_c_disabled_active {
            background-color: palevioletred;
            border-color: transparent;
        }
        /* ================================================================ */
        .sr_numbers h4 {
            position: absolute;
            top: var(--sr-title-top);
            left: var(--sr-title-left);
            font-size: var(--sr-title-font-size);
            padding: 0px 3px;
            background-color: var(--inputBox-bg);
        }
        .sr_numbers h4::after {
            content: "(객실 하나 당 최대 6인)";
            color: #777;
            font-size: 100%;
            margin-left: 10px;
        }
        .tfoot_wrap {
            transition: .3s ease;
        }
        .sr_n_list {
            padding: 10px 0px;
        }
        .thead, 
        .tfoot,
        .sr_n_list,
        .tbody_add {
            width: 100%;
            display: flex;
            box-sizing: border-box;
        }
        .td {
            width: 130px;
            height: calc( var(--wrap-up-height) / 2 );
            min-height: calc( var(--wrap-up-min-height) / 2 );
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }
        .th {
            width: 80px;
            height: calc( var(--wrap-up-height) / 2 );
            min-height: calc( var(--wrap-up-min-height) / 2 );
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }
        .thead .td > div {
            font-size: 13px;
            color: #777;
        }
        .sr_n_tdBtn {
            box-sizing: border-box;
            font-weight: 600;
        }
        .sr_deleteRoom {
            display: block;
            width: 30px;
            height: 30px;
            font-size: 0px;
            background: rgb(248, 175, 162) url("img/close_button.png") no-repeat center/20px;
            border-radius: 50%;
            box-sizing: border-box;
        }
        .sr_addRoom {
            display: block;
            width: 30px;
            height: 30px;
            font-size: 0px;
            background: rgb(143, 171, 255) url("img/plus.png") no-repeat center/20px;
            border-radius: 50%;
        }
        /* ----------------------------- */
        .sr_searchBtn button {
            border: 2px solid black;
            width: 100px;
            height: 50px;
            padding-left: 10px;
            background: url("img/search.svg") no-repeat left 10px center/ 30px;
            font-size: var(--sr-title-font-size);
            font-weight: bold;
            font-family: 'Noto Sans KR';
            cursor: pointer;
        }
        .sr_searchBtn button:active {
            background-color: tomato;
        }
        /* ================================================================ */
        .roomInfo {
            width: 100%;
        }
        .roomInfo_wrap {
            max-width: var(--main-width);
            width: 100%;
            margin: auto;
            padding: 20px;
        }
        .ri_elem_info {
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }
        .ri_elem_info_wrap {
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.26);
            padding: 30px;
            height: 400px;
        }
        .ri_elem_info h4 {
            font-size: 200%;
            margin: 0px;
        }
        .ri_elem_info_wrap div {
            width: 100%;
            padding: 3% 0% 10% 10%;
        }
        .ri_elem_tag_page {
            position: relative;
        }
        .ri_e_t_box {
            width: 100%;
            padding: 20px 0px;
            box-sizing: border-box;

            display: flex;
            flex-wrap: wrap;
            position: relative;
        }
        .ri_elem_tag_page > div::before {
            content: "";
            display: block;
            width: 90%;
            height: 2px;
            background: linear-gradient(to right,transparent,#666,transparent);
            position: absolute;
            left: 5%;
            bottom: 0px;
        }
        /* -----slide------- */
        .ri_e_t_slide {
            width: var(--roomInfo-slide-unit);
            max-width: 400px;
            position: relative;
            overflow: hidden;
        }
        .ri_e_t_slide a {
            display: block;
            position: absolute;
            z-index: 100;
            top: 50%;
            font-size: 0px;

            width: 20%;
            aspect-ratio: 1/1;
            background-color: rgba(255, 255, 255, 0.459);
        }
        .slideback {
            left: 0px;
            background: url(./img/arrow_back.png) no-repeat center/50%;
        }
        .slidenext {
            right: 0px;
            background: url("img/arrow_forward.png") no-repeat center/50%;
        }
        .ri_e_t_slide ul {
            display: flex;
            position: relative;
            top: 0px;
            left: 0px;

            transition: .5s ease;
        }
        .ri_e_t_slide li img {
            display: block;
            width: var(--roomInfo-slide-unit);
            max-width: 400px;
        }
        /* ---------------------- */
        .ri_e_t_exp {
            box-sizing: border-box;
            padding-left: 60px;

            display: flex;
            flex-direction: column;
            align-items: start;
        }
        .ri_e_t_exp_title {
            font-size: 200%;
            font-weight: 600;
            display: block;
            padding-bottom: 20px;
        }
        .ri_e_t_exp_open {
            display: flex;
            background-color: rgba(255,255,255,0.7);
            border: 2px solid #6666667a;
            color: #666;
            padding: 2px 10px;
            border-radius: 20px;
        }
        .ri_e_t_exp_open::before {
            content: "";
            display: inline-block;
            width: 20px;
            aspect-ratio: 1/1;

            background: url("./img/info.png") left center/ 20px no-repeat;
            filter: contrast(10%);
            padding-right: 5px;
        }
        /* ---------------------- */
        .ri_e_t_e_charWrap {
            position: fixed;
            top: 0px;
            left: 0px;
            width: 100vw;
            height: 100vh;
            backdrop-filter: brightness(0.8) blur(1px);
            z-index: 9999;

            display: none;
            justify-content: center;
            align-items: center;
        }
        .ri_e_t_e_char {
            position: relative;

            padding: 30px 50px;
            display: none;
            justify-content: center;
            align-items: start;
            background-color: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            box-shadow: 2px 2px 5px #666;
            border-radius: 10px;
            box-sizing: border-box;
        }
        .ri_e_t_e_char > a {
            position: absolute;
            top: 10px;
            right: 10px;
            display: block;
            width: 30px;
            height: 30px;
            font-size: 0px;
            background: rgb(248, 175, 162) url("img/close_button.png") no-repeat center/20px;
            border-radius: 50%;
        }
        .ri_e_t_e_char dl{
            width: fit-content;
            max-width: 30%;
            padding-right: 30px;
        }
        .ri_e_t_e_char dt {
            margin: 10px;
            padding: 5px;
            width: 70%;
            border-bottom: 2px solid rgba(153, 205, 50, 0.7);
            font-size: 105%;
            color: rgb(113, 150, 38);
        }
        .ri_e_t_e_char dd {
            padding-bottom: 5px;
            position: relative;
            font-size: 95%;
            word-break: keep-all;
        }
        .ri_e_t_e_char dd::before {
            content: "•";
            display: inline-block;
            position: absolute;
            top: 0px;
            left: -15px;
            color: yellowgreen;
            opacity: 0.7;
        }
        .ri_e_t_e_room {
            padding-right: 20px;
        }
        .ri_e_t_e_room span{
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;

            margin: 23px 0px;
            padding: 10px;
            border: 2px solid tomato;
            border-radius: 20px;
            box-sizing: border-box;
        }
        .ri_e_t_e_room span:nth-of-type(1)::before {
           content: "수용 인원";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        .ri_e_t_e_room span:nth-of-type(2)::before {
           content: "메인 객실";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        .ri_e_t_e_room span:nth-of-type(3)::before {
           content: "어린이 객실";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        .ri_e_t_e_room span:nth-of-type(4)::before {
           content: "욕실";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        .ri_e_t_e_room span:nth-of-type(5)::before {
           content: "객실 면적";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        .ri_e_t_e_room span:nth-of-type(6):not(.notroom)::before {
           content: "뷰";
           display: block;
           position: absolute;
           top: -20px;
           left: 10px;
           font-size: 13px;
           color: #666;
        }
        /* ======================================================= */
        .ri_e_t_choice_body {
            height: 10vh;
            min-height: 80px;
        }
        .ri_e_t_choice {
            width: 100%;
        }
        .ri_e_t_choice li {
            background-color: wheat;
            position: relative;
        }
        .ri_e_t_c_price {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 200px;
            height: 50%;
            background-color: orange;

            position: absolute;
            bottom: 0px;
            right: 0px;

            font-size: 16px;
            font-weight: 600;

        }
        /* ===================================================== */
        .hotel_basket {
            position: fixed;
            top: 0px;
            right: 20px;

            width: 200px;
            height: 500px;
            background-color: cyan;
        }
    </style>
    <link rel="stylesheet" href="./t_hotel_reser01_0.css">
</head>
<body>
    <main>
        <div class="mainWrap">
            <div class="shortReservation">
                <form class="shortReservation_wrap_up">
                    <div class="sr_date">
                        <h4>기간 선택</h4>
                        <div class="inputBox">
                            <div class="checkin">
                              <label for="checkin_input">체크인</label>
                              <input type="date" name="checkin" id="checkin_input" />
                              <span>날짜 입력</span>
                            </div>
                            <img src="./img/arrow_right_alt.png" alt="">
                            <div class="checkout">
                              <label for="checkout_input">체크아웃</label>
                              <input type="date" name="checkout" id="checkout_input" />
                              <span>날짜 입력</span>
                            </div>
                        </div>
                        <div class="sr_date_calender"></div>
                    </div>
                    <div class="sr_numbers">
                        <h4>객실 및 투숙인원 선택</h4>
                        <div class="table">
                                <div class="thead">
                                        <div class="th">
                                            <strong>객실</strong>
                                        </div>
                                        <div class="td sr_n_l_head">
                                            <strong>성인</strong>
                                            <div>만 13세 이상</div>
                                        </div>
                                        <div class="td sr_n_l_head">
                                            <strong>어린이</strong>
                                            <div>만 2세 ~ 만 13세 미만</div>
                                        </div>
                                        <div class="td sr_n_l_head">
                                            <strong>유아</strong>
                                            <div>만 2세 미만</div>
                                        </div>
                                </div>
                                <div class="tbody">
                                    <div class="sr_n_list">
                                        <div class="th">
                                            <a href="#none" class="sr_n_tdBtn">객실 1</a>
                                            <a href="#none" class="sr_deleteRoom changeDelBtn">취소</a>
                                        </div>
                                        <div class="td">
                                            <div class="numberCheck">
                                                <input type="number" name="sr_n_adult" class="sr_n_adult" id="sr_n_adult" value="0" max="3" readonly/>
                                                <a href="#none" class="decrease_btn">수량 제외<img src="./img/minus.png" alt=""></a>
                                                <a href="#none" class="increase_btn">수량 추가<img src="./img/plus.png" alt=""></a>
                                            </div>
                                        </div>
                                        <div class="td">
                                            <div class="numberCheck">
                                                <input type="number" name="sr_n_child" class="sr_n_child" id="sr_n_child" value="0" max="3" readonly/>
                                                <a href="#none" class="decrease_btn">수량 제외<img src="./img/minus.png" alt=""></a>
                                                <a href="#none" class="increase_btn">수량 추가<img src="./img/plus.png" alt=""></a>
                                            </div>
                                        </div>
                                        <div class="td">
                                            <div class="numberCheck">
                                                <input type="text" name="sr_n_toddler" class="sr_n_toddler" id="sr_n_toddler" value="0" max="2" readonly/>
                                                <a href="#none" class="decrease_btn">수량 제외<img src="./img/minus.png" alt=""></a>
                                                <a href="#none" class="increase_btn">수량 추가<img src="./img/plus.png" alt=""></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tbody_add">
                                    <div class="th">
                                        <a href="#none" class="sr_addRoom">객실 추가</a>
                                    </div>
                                </div>
                                <div class="tfoot_wrap">
                                    <div class="tfoot">
                                            <div class="th f0">1</div>
                                            <div class="td f1">0</div>
                                            <div class="td f2">0</div>
                                            <div class="td f3">0</div>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="sr_codeSearch">
                        <div class="sr_code">
                            <div class="sr_c_title">
                                <h4>
                                    <a href="#none">할인코드</a>
                                </h4>
                                <input type="text" name="dc_code" id="sr_c_input" placeholder="할인코드 직접 입력">
                            </div>
                            <div>
                                <ul class="sr_c_list">
                                    <li><a href="#none" class="sr_c_early" data-code="early">#얼리버드 패키지</a></li>
                                    <li><a href="#none" class="sr_c_awesome" data-code="awesome">#어썸 초이스</a></li>
                                    <li><a href="#none" class="sr_c_birthday" data-code="birthday">#브릭스타틱 생일 패키지</a></li>
                                    <li><a href="#none" class="sr_c_friends" data-code="friends">#NEW LEGO® 프렌즈 패키지</a></li>
                                    <li><a href="#none" class="sr_c_twodays" data-code="twodays">#LEGOLAND® 파크 2일+호텔 패키지</a></li>
                                    <li><a href="#none" class="sr_c_default" data-code="default">#조식 패키지</a></li>
                                    <li><a href="#none" class="sr_c_disabled" data-code="disabled">#장애인 친화 객실</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="sr_searchBtn">
                            <button type="submit">검색</button>
                            <!-- <a href="#none" class="sr_up">UP</a> -->
                        </div>
                    </div>
                    <a href="#none" class="sr_open">열기</a>
                </form>
            </div>
            <div class="promotionSlide">
                <div class="promotionSlide_wrap"></div>
            </div>
            <div class="roomInfo">
                <div class="roomInfo_wrap">
                    <h3>객실 정보</h3>
                    <div class="ri_load_pirate"></div>
                    <div class="ri_load_kingdom"></div>
                    <div class="ri_load_friends"></div>
                    <div class="ri_load_ninja"></div>
                </div>
            </div>
            <div class="hotel_basket" hidden>

            </div>
        </div>
        <script>          
            $(function(){
                const oneday = 86400000;
                const todayDate = new Date();
                // list load-----------------------------------------------
                $(".ri_load_pirate").load("./t_hotel_reser01_p.html");
                $(".ri_load_kingdom").load("./t_hotel_reser01_k.html");
                $(".ri_load_friends").load("./t_hotel_reser01_f.html");
                $(".ri_load_ninja").load("./t_hotel_reser01_n.html");

                $(".sr_date_calender").load("./unit/multi_calender_hotel.html");
                if ( !localStorage.getItem("hotelBasket")) {
                    localStorage.setItem("hotelBasket", JSON.stringify([]));
                }
                // common -------------------------------------------------
                $(".sr_numbers")
                    .delegate(".decrease_btn",'click',function(e){
                        if( $(this).siblings("input").val() > 0) {
                            $(this).siblings("input").val((i,v) => +v-1);
                        }
                        $(this).siblings("input").trigger("change");
                    })
                    .delegate(".increase_btn",'click',function(e){
                        if ( $(this).hasClass(["sr_n_adult","ar_n_child"])) {
                            if ($(this).siblings("input").val() < 4) {
                                $(this).siblings("input").val((i,v) => +v+1);
                            }
                        } else {
                            if ($(this).siblings("input").val() < 3) {
                                $(this).siblings("input").val((i,v) => +v+1);
                            }
                        }
                        $(this).siblings("input").trigger("change");
                    })
                    //객실 취소
                    .delegate(".sr_deleteRoom",'click',function(e){
                        const trLength = $(".sr_n_list").length;
                        if (trLength > 1) {
                            $(this).parents(".sr_n_list").remove();
                            $(".sr_n_list").each(function(i){
                                $(this).find(".sr_n_tdBtn").text(`객실 ${i+1}`);
                            });
                        }
                    })
                    // 취소버튼 토글
                    .delegate(".sr_deleteRoom",'mouseleave',function(e){
                        $(this).addClass("changeDelBtn");
                        $(this).siblings(".sr_n_tdBtn").removeClass("changeDelBtn")

                    })
                    .delegate(".sr_n_tdBtn",'mouseenter',function(e){
                        $(this).addClass("changeDelBtn");
                        $(this).siblings(".sr_deleteRoom").removeClass("changeDelBtn")
                    })

                function comma(x) {
                    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                }
                
                // shortReservation slide ----------------------------------
                $(".sr_up").click(function(){
                    if ($(".shortReservation_wrap").length == 0) {
                        $(".shortReservation_wrap_up").toggleClass("shortReservation_wrap");
                        $(".shortReservation_wrap_up").toggleClass("shortReservation_wrap_up");
                    } else {
                        $(".shortReservation_wrap").toggleClass("shortReservation_wrap_up");
                        $(".shortReservation_wrap").toggleClass("shortReservation_wrap");
                    }
                })
                // 객실 추가/삭제--------------------------------------------
                $(".sr_addRoom").click(function(){
                    const trLength = $(".sr_n_list").length;
                    console.log(trLength)
                    if (trLength <4) {
                        $(".sr_n_list").eq(0).addClass("sr_n_list_origin");
                        const $cloneTr = $(".sr_n_list_origin").clone(true);
                        $cloneTr.removeClass("sr_n_list_origin");
                        $cloneTr.find(".th .sr_n_tdBtn").text(`객실 ${trLength + 1}`);
                        $cloneTr.find("input").each(function(){
                            $(this)
                            .prop("id", function(i,v){ return v + (trLength+1) })
                            .val((i,v) => 0);
                        })
                        $(".sr_numbers .tbody").append($cloneTr);
                    }
                });
                
                // slide ---------------------------------------------------
                
                $(".sr_open").click(function(){
                    $(".shortReservation_wrap_up").toggleClass("uup");
                    $(".tbody_add").toggle();
                    let f1=0,f2=0,f3=0;
                    const f0 = $(".sr_n_list").length;
                    $(".sr_n_list").each(function(){
                        f1 += +$(this).find(".sr_n_adult").val();
                        f2 += +$(this).find(".sr_n_child").val();
                        f3 += +$(this).find(".sr_n_toddler").val();
                    });
                    $(".f0").text(f0);
                    $(".f1").text(f1);
                    $(".f2").text(f2);
                    $(".f3").text(f3);
                })
                // 요금 계산 ------------------------------------------------
                const priceArray_premium = [340000, 320000, 320000, 320000, 320000, 380000, 520000];
                const priceArray_park = priceArray_premium.map(x => x+50000);
                const priceArray_corner = priceArray_premium.map(x => x+100000);
                const priceArray_suite = priceArray_premium.map(x => x+200000);
                const priceArray_deluxe = priceArray_premium.map(x => x+300000);
                const A1 = [ [],priceArray_premium, priceArray_premium, priceArray_park, priceArray_corner, priceArray_suite, priceArray_deluxe];
                // data-theme [1 : pirate , 2 : kingdom , 3 : friends , 4 : ninja ]
                // data-room [1 : premium , 2 : disabled , 3 : park , 4 : corner , 5 : suite , 6 : deluxe]
                
                $(".sr_c_list a").not(".sr_c_disabled").click(function(){
                    if ( $(this).hasClass("sr_c_active")) {
                        $(this).removeClass("sr_c_active");
                        $(".ri_e_t_choice li").show();
                        $("#sr_c_input").val((i,v) => "");
                    } else {
                        $(this).addClass("sr_c_active");
                        $(".sr_c_list").find("a").not($(this)).removeClass("sr_c_active");
                        $("#sr_c_input").val((i,v) => $(this).data("code"));

                        const q = $(this).data("code");
                        $(".ri_e_t_choice li").each(function(){
                            if ($(this).data("code") == q) {
                                $(this).show();
                            } else {
                                $(this).hide();
                            }
                        });
                    }
                });
                $("#sr_c_input").change(function(){
                    const q = $(this).val();
                    $(".sr_c_list a").each(function(i){
                        if($(this).data("code")==q) {
                            $(this).addClass("sr_c_active");
                        } else {
                            $(this).removeClass("sr_c_active");
                        }
                    })
                })

                $(".sr_c_disabled").click(function(){
                    $(this).toggleClass("sr_c_disabled_active");
                });
                
                $(".shortReservation_wrap_up").on("submit",function(e){ //===================================
                    $(".ri_e_t_choice").show();
                    $(".ri_e_t_choice_extra").children().remove();
                    e.preventDefault();
                    const d = new FormData(e.target);
                    const c = Object.fromEntries(d.entries());
                    
                    const adultNumber = c["sr_n_adult"];
                    const childNumber = c["sr_n_child"];
                    const toddlerNumber = c["sr_n_toddler"];
                    const checkinDate = new Date(c["checkin"]);
                    const checkoutDate = new Date(c["checkout"]);
                    

                    // ================= default ======================

                    $(".ri_e_t_choice_default").each(function(){
                        if ( $(".sr_c_active").length == 0 || $(".sr_c_default").hasClass("sr_c_active")) {
                            const $par = $(this).parents(".ri_e_t_box");
                            const t = $par.data("theme");
                            const r = $par.data("room");
                            let m = 0;
                            for ( let j = checkinDate; j < checkoutDate; j += oneday) {
                                const d = new Date(j).getDay();
                                m += A1[r][d];
                            }
                            $(this).children(".default_li")
                                .show()
                                .find(".ri_e_t_c_price")
                                    .data("price",m)
                                    .text("￦" + comma(m));
                            $(this).children(".defaultAnnual_li")
                                .show()
                                .find(".ri_e_t_c_price")
                                    .data("price",m*0.9)
                                    .text("￦" + comma(m*0.9));
                        } else {
                            $(".default_li, .defaultAnnual_li").hide();
                        }
                    });
                    // 장애인 친화 객실 -----------
                    
                    if ( $(".sr_c_disabled").hasClass("sr_c_disabled_active")) {
                        $(".ri_e_t_box").each(function(){
                            if($(this).data("room") == 2) {
                                $(this).show();
                            } else {
                                $(this).hide()
                            }
                        })
                    } else {
                        $("ri_e_t_box").show();
                    }
                    
                    //1. 파크 2일 이용권 --------------------------------------
                    $(".twodays_li").each(function(){
                        if ( $(".sr_c_active").length == 0 || $(".sr_c_twodays").hasClass("sr_c_active")) {
                            if ( checkoutDate - checkinDate == oneday) {                        
                                    $(this).show();
                                    const q = checkinDate.getDay();
                                    const w = checkoutDate.getDay();
                                    const ticket = adultNumber * 60000 + childNumber * 50000;
                                    $(".twodays_li").each(function(){
                                        const par = $(this).parents(".ri_e_t_box").data("room");
                                        $(this).find(".ri_e_t_c_price")
                                            .data("price", A1[par][q] + ticket )
                                            .text( "￦" + comma(A1[par][q] + ticket) );
                                    });
                            } else {
                                $(this).hide();
                            }
                        } else {
                            $(this).hide();
                        }
                    });
                    // =================== 새로 제작 ====================
                    const originLi = $(`
                        <li>
                            <div class="ri_e_t_choice_body">
                                <strong><a href="#none"></a></strong>
                                <a href="#none" class="ri_e_t_c_price"></a>
                            </div>
                            <div class="ri_e_t_choice_slide">
                                <div class="cs_exp"></div>
                                <div class="cs_price"></div>
                            </div>
                        </li>                        
                    `);
                     
                    
                    $(".ri_e_t_choice_extra").each(function(){
                        const r = $(this).parents(".ri_e_t_box").data("room");
                        const t = $(this).parents(".ri_e_t_box").data("theme");
                        //2. 얼리버드

                        if ( $(".sr_c_active").length == 0 || $(".sr_c_early").hasClass("sr_c_active")) {
                            if ( checkinDate - todayDate > oneday*21 && 0<checkinDate.getDay() && checkinDate.getDay()<4 && 0<checkoutDate.getDay() && checkoutDate.getDay()<4) {
                                if ( todayDate < new Date(2023,5,28) && checkoutDate < new Date(2023,6,19)) {
                                    if ( (r == 1 || r == 3) &&  t != 3) {
                                        let m = 0;
                                        for ( let j = checkinDate; j < checkoutDate; j += oneday) {
                                            const d = new Date(j).getDay();
                                            m += A1[r][d];
                                        }
                                        const $earlyLi = originLi.clone(true);
                                        $earlyLi
                                            .data("code","early")
                                            .addClass("early_li")
                                            .appendTo($(this))
                                        $earlyLi.find("strong a").text("얼리버드 조식 패키지")
                                        $earlyLi.find(".ri_e_t_c_price")
                                            .data("price", m*0.8)
                                            .text("￦" + comma(m*0.8));
    
                                        
                                        const $earlyAnnualLi = originLi.clone(true);
                                        $earlyAnnualLi
                                            .data("code","early")
                                            .addClass("earlyAnnual_li")
                                            .data("annual",true)
                                            .appendTo($(this))
                                        $earlyAnnualLi.find("strong a").text("[연간회원권 할인]얼리버드 조식 패키지");
                                        $earlyAnnualLi.find(".ri_e_t_c_price")
                                            .data("price", m*0.8*0.9)
                                            .text("￦" + comma(m*0.8*0.9));
    
                                        if (  checkoutDate - checkinDate == oneday ) {
                                            const ticket = adultNumber * 60000 + childNumber * 50000;
                                            const $earlyTwoLi = originLi.clone(true);
                                            $earlyTwoLi
                                                .data("code","early")
                                                .addClass("earlyTwo_li")
                                                .appendTo($(this));
                                            $earlyTwoLi.find("strong a").text("얼리버드 파크 2일 이용권 패키지");
                                            $earlyTwoLi.find(".ri_e_t_c_price")
                                                .data("price", m*0.8 + ticket)
                                                .text("￦" + comma(m * 0.8 + ticket));
                                        }
                                    }  
                                }
                            }
                            
                        } else {
                            $(".early_li, .earlyAnnual_li, .earlyTwo_li").remove();
                        }

                        //3. 어썸초이스 - 프리미엄 only 파크뷰는 연간회원권만 , 프렌즈 x
                        if ( $(".sr_c_active").length == 0 || $(".sr_c_awesome").hasClass("sr_c_active")) {
                            if ( checkoutDate - checkinDate >= oneday*2) {
                                if (checkoutDate < new Date(2023,11,31)) {
                                    if ( t != 3 && t != 2 ) {
                                        let m = 0;
                                        for ( let j = checkinDate; j < checkoutDate; j += oneday) {
                                            const d = new Date(j).getDay();
                                            m += A1[r][d];
                                        }
                                        if( r == 1 ) {
                                           const $awesomeLi = originLi.clone(true);
                                           $awesomeLi
                                                .data("code", "awesome")
                                                .addClass("awesome_li")
                                                .appendTo($(this));
                                            $awesomeLi.find("strong a").text("어썸 초이스");
                                            $awesomeLi.find(".ri_e_t_c_price")
                                                .data("price",m*0.95)
                                                .text("￦" + comma(m*0.95));
        
                                           const $awesomeAnnualLi = originLi.clone(true);
                                           $awesomeAnnualLi
                                                .data("code", "awesome")
                                                .data("annual",true)
                                                .addClass("awesomeAnnual_li")
                                                .appendTo($(this));
                                            $awesomeAnnualLi.find("strong a").text("[연간회원권 할인]어썸 초이스");
                                            $awesomeAnnualLi.find(".ri_e_t_c_price")
                                                .data("price", m*0.85)
                                                .text("￦" + comma(m*0.85));
                                        }
                                        if ( r == 3 ) {
                                            const $awesomeAnnualLi = originLi.clone(true);
                                            $awesomeAnnualLi
                                                 .data("code", "awesome")
                                                 .data("annual",true)
                                                 .addClass("awesomeAnnual_li")
                                                 .appendTo($(this));
                                             $awesomeAnnualLi.find("strong a").text("[연간회원권 할인]어썸 초이스");
                                             $awesomeAnnualLi.find(".ri_e_t_c_price")
                                                .data("price", m * 0.85)
                                                .text("￦" + comma(m*0.85));
                                        }
                                    }
    
                                }
                            }
                           
                        } else {
                            $(".awesome_li, .awesomeAnnual_li").remove();
                        }
                        //4. 프렌즈 이벤트
                        if ($(".sr_c_friends").hasClass("sr_c_active")) {
                            $(".roomInfo_wrap > div").not(".ri_load_friends").hide();
                            $(".ri_load_friends").show();
                        } else {
                            $(".roominfo_wrap > div").show();
                        }
                        if ( t == 3 ) {
                            const $sib = $(this).siblings(".ri_e_t_choice_fixed");
                            if ( checkoutDate < new Date(2023,5,6)) {
                                $sib.children("li").eq(0)
                                    .find("strong a").text("[NEW LEGO® 프렌즈 패키지]조식 및 파크 2일 이용권 패키지")
                                $sib.children("li").eq(1)
                                    .find("strong a").text("[NEW LEGO® 프렌즈 패키지]조식 패키지")
                                $sib.children("li").eq(2)
                                    .find("strong a").text("[NEW LEGO® 프렌즈 패키지] 연간회원권 할인 - 조식 패키지")
                            }
                        }
                        //5. 브릭스타틱 생일 이벤트
                        if ( $(".sr_c_active").length == 0 || $(".sr_c_birthday").hasClass("sr_c_active")) {
                            if ( (r == 1 || r == 3) && (t != 3)) {
                                if ( checkoutDate - checkinDate == oneday) {                        
                                    const $birthdayLi = originLi.clone(true);
                                    $birthdayLi
                                        .data("code", "birthday")
                                        .addClass("birthday_li")
                                        .appendTo($(this));
                                    $birthdayLi.find("strong a").text("레고랜드® 브릭타스틱 생일 패키지");
                                    $birthdayLi.find(".ri_e_t_c_price").text("￦" + comma(m+100000));
                                   
                                    const $birthdayAnnualLi = originLi.clone(true);
                                    $birthdayAnnualLi
                                        .data("code", "birthday")
                                        .data("annual",true)
                                        .addClass("birthdayAnnual_li")
                                        .appendTo($(this));
                                    $birthdayAnnualLi.find("strong a").text("[연간회원권 할인]레고랜드® 브릭타스틱 생일 패키지");
                                    $birthdayAnnualLi.find(".ri_e_t_c_price").text("￦" + comma(m+90000));
                                }
                            }
                        
                        } else {
                            $(".birthday_li, .birthdayAnnual_li").remove();
                        }
                    });                    
                });

                // ========= 제출
                $(".ri_e_t_c_price").each(function(){
                    const g = $(this).siblings("strong").find("a").text();
                    $(this).data("title",g);

                    $(this).click(function(){
                        $(".shortReservation_wrap")
                            .trigger("submit")
                            .submit(function(e){
                                const d = new FormData(e.target);
                                const c = Object.fromEntries(d.entries());
                                let basketArray = JSON.parse(localStorage.getItem("hotelBasket"));
                                    basketArray.push(JSON.stringify(c));
                                    localStorage.setItem("hotelBasket", JSON.stringify(basketArray));
                                
                                
                            });

                    })
                })
            });
        
        </script>
    </main>
</body>
</html>